<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Build A Monster</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    /* â­ ì»¤ìŠ¤í…€ íŒì—… ìŠ¤íƒ€ì¼ (í¬ê¸° ë” ì¶•ì†Œ ë°˜ì˜) */
    #custom-modal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.85); z-index: 10000; align-items: center; justify-content: center;
    }
    .modal-content {
      background: #111; border: 2px solid #39ff14; border-radius: 15px; 
      padding: 15px; text-align: center; width: 65%; max-width: 280px; box-shadow: 0 0 15px #39ff14;
    }
    .modal-content p { color: #fff; font-size: 14px; line-height: 1.5; margin-bottom: 15px; white-space: pre-wrap; }
    .modal-content button {
      background: #39ff14; color: #000; border: none; padding: 10px 0;
      font-size: 15px; font-weight: bold; border-radius: 8px; cursor: pointer; width: 100%;
    }
    .security-warning { margin-top: 20px; font-size: 10px; color: #555; line-height: 1.4; padding: 0 20px; text-align: center; }

    /* í”ë“¤ë¦¼ íš¨ê³¼ ì¶¤ ë™ì‘ ì •ì˜ */
@keyframes shake {
  0% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  50% { transform: translateX(5px); }
  75% { transform: translateX(-5px); }
  100% { transform: translateX(0); }
}
.shake {
  animation: shake 0.4s ease-in-out;
}
  </style>
</head>
<body>
  <div class="container">
    <div id="login-box" class="box">
      <h1>Build A Monster</h1>
      <p>í•¸ë“œí° ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
      <input type="text" id="phone-input" placeholder="ì˜ˆ: 01012345678" style="text-align:center;">
      <button onclick="login()">Login</button>
    </div>

    <div id="app" style="display:none;">
      <div id="unit-selector" class="box">
        <h2 id="welcome-msg">Unit ì„ íƒ</h2>
        <div id="unit-buttons"></div>
        <button onclick="showResultsPage()" style="background:#444; color:#39ff14; margin-top:20px; font-size:16px;">ğŸ“Š Progress Report</button>
      </div>

      <div id="menu-box" class="box" style="display:none;">
        <h2 id="menu-title">Select Mode</h2>
        <button onclick="startScriptMode()">Script</button>
        <button onclick="startVocaMode()">Vocab</button>
        <button onclick="startAccurateSpeakingMode()" style="background:#39ff14; color:#000;">Accurate Speaking</button> 
        <button onclick="startASMode()">AS Correction</button>
        <button onclick="startRepeatMode()">ë°˜ë³µë“£ê¸°</button>
        <button onclick="goBackToUnits()" style="background:#666; color:#fff; margin-top:20px;">Back to Menu</button>
      </div>

      <div id="as-record-box" class="box" style="display:none;">
        <h2 style="color:#39ff14;">Accurate Speaking</h2> <div style="text-align:left; border-bottom:1px solid #333; padding-bottom:10px; margin-bottom:15px;">
          <p style="color:#39ff14; font-size:12px; margin-bottom:5px;">[Teacher's Question]</p>
          <p id="as-q-text" style="font-size:16px; line-height:1.4;"></p>
        </div>
        <button id="as-listen-btn" onclick="listenQuestion()">Listen Question</button>
        <div id="recording-ui" style="display:none; margin-top:20px;">
          <div id="rec-timer" style="font-size:32px; color:#ff4b4b; font-weight:bold; margin-bottom:10px;">00:00</div>
          <div style="color:#ff4b4b; margin-bottom:15px; font-weight:bold;">ğŸ”´ Recording...</div>
          <button onclick="stopRecording()" style="background:#ff4b4b; color:#fff;">Stop Recording</button>
        </div>
        <div id="submit-ui" style="display:none; margin-top:20px;">
          <textarea id="student-text-input" rows="4" placeholder="Your Answer (ì›ë¬¸)" style="width:90%; background:#222; color:#fff; border:1px solid #39ff14; border-radius:10px; padding:10px; font-size:15px;"></textarea>
          <button onclick="submitAccurateSpeaking()" style="margin-top:15px;">ì„ ìƒë‹˜ì—ê²Œ ì œì¶œ</button>
        </div>
        <button onclick="showMenu()" class="sub-action-btn" style="margin-top:20px;">Back</button>
      </div>

      <div id="study-box" class="box" style="display:none;">
        <div id="progress-wrap"><div id="progress"></div></div>
        <div id="progress-percent">0%</div>
        <p id="sentence" style="font-size:18px; font-weight:bold;">Ready?</p>
        <p id="sentence-kor" style="font-size:15px; color:#aaa;"> </p>
        <div id="control-area" style="display: flex; flex-direction: column; align-items: center; gap: 10px; margin-top: 20px;">
          <button id="start-btn" onclick="startStudy()" style="width: 95%;">Start</button>
          <button id="skip-btn" onclick="nextStep()" class="sub-action-btn" style="display:none;">Skip</button>
          <button onclick="showMenu()" class="sub-action-btn">Back</button>
        </div>
      </div>
      <div id="as-box" class="box" style="display:none;"></div>
      <div id="results-box" class="box" style="display:none; max-height: 90vh; overflow-y: auto;">
        <h2 style="color:#39ff14;">Progress Report</h2>
        <div id="results-content" style="padding: 0 5px;"></div>
        <button onclick="showBox('unit-selector')" class="sub-action-btn" style="margin-top:20px;">Back to Menu</button>
      </div>
      <div id="repeat-box" class="box" style="display:none;">
        <div id="repeat-list" style="text-align:left; max-height:350px; overflow-y:auto; padding-top:10px;"></div>
        <button onclick="stopRepeatAudio(); showMenu();" class="sub-action-btn" style="margin-top:20px;">Back to Menu</button>
      </div>
      <div id="dev-box" class="box" style="display:none;">
        <h2 id="dev-title">Loading...</h2>
        <p id="dev-msg" style="padding:50px 0;">ë°ì´í„°ë¥¼ ì „ì†¡ ì¤‘ì…ë‹ˆë‹¤. â³</p>
      </div>
    </div>

    <div id="custom-modal">
      <div class="modal-content">
        <p id="modal-msg"></p>
        <button onclick="closeCustomModal()">í™•ì¸</button>
      </div>
    </div>

    <footer>
      <div class="security-warning">ê²½ê³ : ë³¸ ì‹œìŠ¤í…œì€ ì¸ê°€ëœ ì‚¬ìš©ìë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤. ëª¨ë“  ì ‘ì† ë¡œê·¸ëŠ” ì‹¤ì‹œê°„ìœ¼ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.</div>
      <p style="color: #888; font-size: 11px; font-weight: bold; text-align: center; margin-top: 10px;">Copyright Â© 2026 English App. All rights reserved.</p>
    </footer>
  </div>
  <script src="app.js"></script>
</body>
</html>

